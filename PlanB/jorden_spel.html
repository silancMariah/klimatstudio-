<!doctype html>
<html lang="sv">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bygg Jorden - Python Klassresa</title>
  <script src="/_sdk/element_sdk.js"></script>
  <style>
        body {
            box-sizing: border-box;
            margin: 0;
            padding: 20px;
            font-family: 'Comic Sans MS', cursive, sans-serif;
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a3a 50%, #2d1b69 100%);
            min-height: 100%;
            color: #333;
            overflow-x: hidden;
        }

        .game-container {
            max-width: 1000px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 25px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
            backdrop-filter: blur(10px);
        }

        .header {
            background: linear-gradient(45deg, #ff6b35, #f7931e);
            color: white;
            padding: 25px;
            text-align: center;
            position: relative;
        }

        .header h1 {
            margin: 0;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { text-shadow: 2px 2px 4px rgba(0,0,0,0.3), 0 0 10px rgba(255,255,255,0.2); }
            to { text-shadow: 2px 2px 4px rgba(0,0,0,0.3), 0 0 20px rgba(255,255,255,0.4); }
        }

        .welcome-text {
            margin: 15px 0 0 0;
            font-size: 1.2em;
            opacity: 0.9;
        }

        .timeline-container {
            padding: 30px;
            background: linear-gradient(90deg, #f8f9fa 0%, #e9ecef 100%);
        }

        .timeline {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
            position: relative;
        }

        .timeline::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #ddd 0%, #ddd 100%);
            z-index: 1;
            border-radius: 2px;
        }

        .timeline-progress {
            position: absolute;
            top: 50%;
            left: 0;
            height: 4px;
            background: linear-gradient(90deg, #ff6b35, #f7931e);
            z-index: 2;
            border-radius: 2px;
            transition: width 0.8s ease;
            transform: translateY(-50%);
        }

        .timeline-step {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2em;
            color: #666;
            position: relative;
            z-index: 3;
            transition: all 0.5s ease;
            cursor: pointer;
        }

        .timeline-step.completed {
            background: linear-gradient(45deg, #28a745, #20c997);
            color: white;
            transform: scale(1.1);
            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.4);
        }

        .timeline-step.current {
            background: linear-gradient(45deg, #ff6b35, #f7931e);
            color: white;
            transform: scale(1.2);
            box-shadow: 0 5px 20px rgba(255, 107, 53, 0.5);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1.2); }
            50% { transform: scale(1.3); }
        }

        .step-label {
            position: absolute;
            top: 70px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.9em;
            font-weight: bold;
            color: #666;
            white-space: nowrap;
        }

        .step-container {
            display: none;
            animation: slideIn 0.6s ease-out;
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin: 20px 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .step-container.active {
            display: block;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .step-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .step-title {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #ff6b35, #f7931e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .step-description {
            font-size: 1.2em;
            color: #666;
            margin-bottom: 20px;
        }

        .planet-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 30px 0;
            height: 200px;
        }

        .planet {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: linear-gradient(45deg, #4a90e2, #357abd);
            position: relative;
            transition: all 0.8s ease;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .planet.glowing {
            animation: planetGlow 2s ease-in-out infinite alternate;
            box-shadow: 0 0 50px rgba(74, 144, 226, 0.6);
        }

        .planet.hot {
            background: linear-gradient(45deg, #ff4757, #ff3742);
            box-shadow: 0 0 50px rgba(255, 71, 87, 0.6);
        }

        .planet.cold {
            background: linear-gradient(45deg, #74b9ff, #0984e3);
            box-shadow: 0 0 50px rgba(116, 185, 255, 0.6);
        }

        .planet.rotating {
            animation: rotate 4s linear infinite;
        }

        @keyframes planetGlow {
            from { box-shadow: 0 0 30px rgba(74, 144, 226, 0.4); }
            to { box-shadow: 0 0 60px rgba(74, 144, 226, 0.8); }
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .planet-stats {
            position: absolute;
            top: -40px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8em;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .planet:hover .planet-stats {
            opacity: 1;
        }

        .code-editor {
            background: #2d3748;
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
            font-family: 'Courier New', monospace;
            color: #e2e8f0;
            position: relative;
            border: 3px solid transparent;
            background-clip: padding-box;
        }

        .code-editor.highlight {
            border-color: #ff6b35;
            box-shadow: 0 0 20px rgba(255, 107, 53, 0.3);
        }

        .code-line {
            margin: 10px 0;
            padding: 8px 15px;
            border-radius: 8px;
            transition: all 0.4s ease;
            position: relative;
        }

        .code-line.typing {
            background: rgba(255, 107, 53, 0.2);
            border-left: 4px solid #ff6b35;
            animation: typeGlow 1s ease-in-out infinite alternate;
        }

        @keyframes typeGlow {
            from { background: rgba(255, 107, 53, 0.2); }
            to { background: rgba(255, 107, 53, 0.4); }
        }

        .code-line.completed {
            background: rgba(40, 167, 69, 0.2);
            border-left: 4px solid #28a745;
        }

        /* Syntax highlighting */
        .keyword { color: #ff6b35; font-weight: bold; }
        .string { color: #48bb78; }
        .comment { color: #a0aec0; font-style: italic; }
        .function { color: #4299e1; font-weight: bold; }
        .variable { color: #ed8936; }
        .self { color: #9f7aea; font-weight: bold; }
        .number { color: #38b2ac; }

        .input-area {
            margin: 20px 0;
        }

        .code-input {
            width: 100%;
            padding: 15px;
            border: 3px solid #ddd;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 16px;
            background: #f8f9fa;
            transition: all 0.3s ease;
        }

        .code-input:focus {
            outline: none;
            border-color: #ff6b35;
            background: white;
            box-shadow: 0 0 15px rgba(255, 107, 53, 0.2);
        }

        .drag-blocks {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin: 20px 0;
            justify-content: center;
        }

        .code-block {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: grab;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            transition: all 0.3s ease;
            user-select: none;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .code-block:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        .code-block:active {
            cursor: grabbing;
            transform: scale(0.95);
        }

        .code-block.used {
            background: #28a745;
            cursor: default;
        }

        .property-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }

        .property-control {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            border: 2px solid #e9ecef;
            transition: all 0.3s ease;
        }

        .property-control:hover {
            border-color: #ff6b35;
            box-shadow: 0 5px 15px rgba(255, 107, 53, 0.1);
        }

        .property-label {
            font-weight: bold;
            margin-bottom: 10px;
            color: #2d3748;
        }

        .property-slider {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: #ddd;
            outline: none;
            transition: all 0.3s ease;
        }

        .property-slider::-webkit-slider-thumb {
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #ff6b35;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
        }

        .property-value {
            text-align: center;
            font-weight: bold;
            color: #ff6b35;
            margin-top: 5px;
        }

        .button-group {
            text-align: center;
            margin: 30px 0;
        }

        .btn {
            background: linear-gradient(45deg, #ff6b35, #f7931e);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 30px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            margin: 0 10px;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(255, 107, 53, 0.3);
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 30px rgba(255, 107, 53, 0.4);
        }

        .btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .btn-secondary {
            background: linear-gradient(45deg, #6c757d, #5a6268);
            box-shadow: 0 5px 20px rgba(108, 117, 125, 0.3);
        }

        .btn-run {
            background: linear-gradient(45deg, #28a745, #20c997);
            box-shadow: 0 5px 20px rgba(40, 167, 69, 0.3);
            font-size: 20px;
            padding: 18px 35px;
        }

        .feedback-message {
            background: linear-gradient(45deg, #28a745, #20c997);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            margin: 20px 0;
            font-size: 1.2em;
            font-weight: bold;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s ease;
        }

        .feedback-message.show {
            opacity: 1;
            transform: translateY(0);
        }

        .final-animation {
            text-align: center;
            padding: 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 20px;
            margin: 30px 0;
        }

        .final-animation h2 {
            font-size: 2.5em;
            margin-bottom: 20px;
            animation: celebration 2s ease-in-out infinite alternate;
        }

        @keyframes celebration {
            from { transform: scale(1); }
            to { transform: scale(1.05); }
        }

        .code-showcase {
            background: #2d3748;
            color: #e2e8f0;
            padding: 25px;
            border-radius: 15px;
            font-family: 'Courier New', monospace;
            margin: 20px 0;
            max-height: 400px;
            overflow-y: auto;
            animation: codeReveal 3s ease-out;
        }

        @keyframes codeReveal {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        .sparkles {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
        }

        .sparkle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: #ffd700;
            border-radius: 50%;
            animation: sparkle 2s ease-in-out infinite;
        }

        @keyframes sparkle {
            0%, 100% { opacity: 0; transform: scale(0); }
            50% { opacity: 1; transform: scale(1); }
        }

        @media (max-width: 768px) {
            .timeline {
                flex-wrap: wrap;
                gap: 10px;
            }
            
            .timeline-step {
                width: 45px;
                height: 45px;
                font-size: 1em;
            }
            
            .property-controls {
                grid-template-columns: 1fr;
            }
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body>
  <div class="game-container">
   <div class="header">
    <h1 id="game-title">🌍 Bygg Jorden - Python Klassresa</h1>
    <p class="welcome-text" id="welcome-message">Välkommen till kodningsäventyret! Lär dig bygga din egen klass steg för steg.</p>
   </div>
   <div class="timeline-container">
    <div class="timeline">
     <div class="timeline-progress" id="timeline-progress"></div>
     <div class="timeline-step current" data-step="1">
      1 
      <div class="step-label">
       Skapa klass
      </div>
     </div>
     <div class="timeline-step" data-step="2">
      2 
      <div class="step-label">
       Skapa objekt
      </div>
     </div>
     <div class="timeline-step" data-step="3">
      3 
      <div class="step-label">
       Egenskaper
      </div>
     </div>
     <div class="timeline-step" data-step="4">
      4 
      <div class="step-label">
       Funktioner
      </div>
     </div>
     <div class="timeline-step" data-step="5">
      5 
      <div class="step-label">
       Använd objekt
      </div>
     </div>
     <div class="timeline-step" data-step="6">
      6 
      <div class="step-label">
       Ändra värden
      </div>
     </div>
    </div><!-- Steg 1: Skapa klass -->
    <div class="step-container active" id="step-1">
     <div class="step-header">
      <div class="step-title">
       🎯 Steg 1: Skapa en klass
      </div>
      <div class="step-description">
       Låt oss börja med att skapa vår första Python-klass!
      </div>
     </div>
     <div class="planet-container">
      <div class="planet" id="planet">
       <div class="planet-stats" id="planet-stats">
        🌍 Jorden skapas...
       </div>
      </div>
     </div>
     <div class="code-editor" id="code-editor-1">
      <div class="code-line typing"><span class="keyword">class</span> <span class="variable">Jorden</span>:
      </div>
      <div class="code-line"><span class="comment"> # Här kommer vår klass att växa!</span>
      </div>
     </div>
     <div class="input-area">
      <p><strong>Skriv koden ovan:</strong></p><input type="text" class="code-input" id="class-input" placeholder="class Jorden:" autocomplete="off">
     </div>
     <div class="feedback-message" id="feedback-1">
      🎉 Fantastiskt! Du har skapat din första klass! Planeten börjar lysa...
     </div>
     <div class="button-group"><button class="btn" id="next-1" onclick="nextStep()" disabled>Nästa steg →</button>
     </div>
    </div><!-- Steg 2: Skapa objekt -->
    <div class="step-container" id="step-2">
     <div class="step-header">
      <div class="step-title">
       🏗️ Steg 2: Skapa ett objekt
      </div>
      <div class="step-description">
       Nu ska vi skapa en kopia av klassen - ditt eget objekt!
      </div>
     </div>
     <div class="planet-container">
      <div class="planet glowing" id="planet-2">
       <div class="planet-stats">
        🌍 Jorden-objektet
       </div>
      </div>
     </div>
     <div class="code-editor">
      <div class="code-line completed"><span class="keyword">class</span> <span class="variable">Jorden</span>:
      </div>
      <div class="code-line completed"><span class="comment"> # Här kommer vår klass att växa!</span>
      </div>
      <div class="code-line">
      </div>
      <div class="code-line typing"><span class="variable">jorden</span> = <span class="function">Jorden</span>()
      </div>
     </div>
     <div class="drag-blocks">
      <div class="code-block" draggable="true" data-code="jorden">
       jorden
      </div>
      <div class="code-block" draggable="true" data-code="=">
       =
      </div>
      <div class="code-block" draggable="true" data-code="Jorden()">
       Jorden()
      </div>
     </div>
     <div class="input-area">
      <p><strong>Dra blocken i rätt ordning:</strong></p>
      <div class="code-input" id="object-input" style="min-height: 50px; display: flex; align-items: center; gap: 10px;"><!-- Blocks will be dropped here -->
      </div>
     </div>
     <div class="feedback-message" id="feedback-2">
      🎉 Perfekt! Nu har du skapat en kopia av klassen - ditt eget objekt!
     </div>
     <div class="button-group"><button class="btn btn-secondary" onclick="prevStep()">← Föregående</button> <button class="btn" id="next-2" onclick="nextStep()" disabled>Nästa steg →</button>
     </div>
    </div><!-- Steg 3: Egenskaper -->
    <div class="step-container" id="step-3">
     <div class="step-header">
      <div class="step-title">
       ⚙️ Steg 3: Ge objektet egenskaper
      </div>
      <div class="step-description">
       Låt oss ge vår planet egenskaper som temperatur, CO₂ och mer!
      </div>
     </div>
     <div class="planet-container">
      <div class="planet" id="planet-3">
       <div class="planet-stats" id="planet-stats-3">
        🌡️ 15°C | 💨 380 ppm CO₂
       </div>
      </div>
     </div>
     <div class="code-editor">
      <div class="code-line completed"><span class="keyword">class</span> <span class="variable">Jorden</span>:
      </div>
      <div class="code-line typing"><span class="keyword"> def</span> <span class="function">__init__</span>(<span class="self">self</span>):
      </div>
      <div class="code-line typing"><span class="self"> self</span>.<span class="variable">temperatur</span> = <span class="number" id="temp-display">15</span>
      </div>
      <div class="code-line typing"><span class="self"> self</span>.<span class="variable">co2</span> = <span class="number" id="co2-display">380</span>
      </div>
      <div class="code-line typing"><span class="self"> self</span>.<span class="variable">alder</span> = <span class="number" id="age-display">4500000000</span>
      </div>
      <div class="code-line typing"><span class="self"> self</span>.<span class="variable">form</span> = <span class="string">"rund"</span>
      </div>
      <div class="code-line typing"><span class="self"> self</span>.<span class="variable">solenergi</span> = <span class="number" id="solar-display">100</span>
      </div>
     </div>
     <div class="property-controls">
      <div class="property-control">
       <div class="property-label">
        🌡️ Temperatur (°C)
       </div><input type="range" class="property-slider" id="temp-slider" min="-50" max="50" value="15">
       <div class="property-value" id="temp-value">
        15°C
       </div>
      </div>
      <div class="property-control">
       <div class="property-label">
        💨 CO₂ (ppm)
       </div><input type="range" class="property-slider" id="co2-slider" min="280" max="500" value="380">
       <div class="property-value" id="co2-value">
        380 ppm
       </div>
      </div>
      <div class="property-control">
       <div class="property-label">
        ☀️ Solenergi (%)
       </div><input type="range" class="property-slider" id="solar-slider" min="50" max="150" value="100">
       <div class="property-value" id="solar-value">
        100%
       </div>
      </div>
     </div>
     <div class="feedback-message" id="feedback-3">
      🎉 Fantastiskt! Nu har din planet egenskaper som förändrar dess utseende!
     </div>
     <div class="button-group"><button class="btn btn-secondary" onclick="prevStep()">← Föregående</button> <button class="btn" id="next-3" onclick="nextStep()">Nästa steg →</button>
     </div>
    </div><!-- Steg 4: Funktioner -->
    <div class="step-container" id="step-4">
     <div class="step-header">
      <div class="step-title">
       🔧 Steg 4: Lägg till funktioner
      </div>
      <div class="step-description">
       Låt oss lägga till en funktion som uppdaterar planeten!
      </div>
     </div>
     <div class="planet-container">
      <div class="planet" id="planet-4">
       <div class="planet-stats">
        🔄 Uppdaterar...
       </div>
      </div>
     </div>
     <div class="code-editor">
      <div class="code-line completed"><span class="keyword">class</span> <span class="variable">Jorden</span>:
      </div>
      <div class="code-line completed"><span class="keyword"> def</span> <span class="function">__init__</span>(<span class="self">self</span>):
      </div>
      <div class="code-line completed"><span class="comment"> # ... egenskaper ...</span>
      </div>
      <div class="code-line">
      </div>
      <div class="code-line typing"><span class="keyword"> def</span> <span class="function">update</span>(<span class="self">self</span>):
      </div>
      <div class="code-line typing" id="if-line"><span class="keyword"> if</span> <span class="self">self</span>.<span class="variable">co2</span> &gt; <span class="number">400</span>:
      </div>
      <div class="code-line typing" id="temp-increase"><span class="self"> self</span>.<span class="variable">temperatur</span> += <span class="number">2</span>
      </div>
      <div class="code-line typing" id="else-line"><span class="keyword"> else</span>:
      </div>
      <div class="code-line typing" id="temp-decrease"><span class="self"> self</span>.<span class="variable">temperatur</span> -= <span class="number">1</span>
      </div>
     </div>
     <div class="drag-blocks">
      <div class="code-block" draggable="true" data-code="if">
       if
      </div>
      <div class="code-block" draggable="true" data-code="else">
       else
      </div>
      <div class="code-block" draggable="true" data-code="self.co2 > 400">
       self.co2 &gt; 400
      </div>
      <div class="code-block" draggable="true" data-code="+=">
       +=
      </div>
      <div class="code-block" draggable="true" data-code="-=">
       =
      </div>
     </div>
     <div class="input-area">
      <p><strong>Dra blocken för att bygga if/else-logiken:</strong></p>
      <div class="code-input" id="function-input" style="min-height: 100px;"><!-- Function blocks will be built here -->
      </div>
     </div>
     <div class="feedback-message" id="feedback-4">
      🎉 Utmärkt! Nu kan din planet reagera på förändringar i CO₂-nivåer!
     </div>
     <div class="button-group"><button class="btn btn-secondary" onclick="prevStep()">← Föregående</button> <button class="btn" id="next-4" onclick="nextStep()" disabled>Nästa steg →</button>
     </div>
    </div><!-- Steg 5: Använd objekt -->
    <div class="step-container" id="step-5">
     <div class="step-header">
      <div class="step-title">
       🚀 Steg 5: Använd objektet
      </div>
      <div class="step-description">
       Nu ska vi köra koden och se vad som händer!
      </div>
     </div>
     <div class="planet-container">
      <div class="planet rotating" id="planet-5">
       <div class="planet-stats" id="planet-stats-5">
        🔄 Kör uppdatering...
       </div>
      </div>
     </div>
     <div class="code-editor highlight">
      <div class="code-line completed"><span class="variable">jorden</span> = <span class="function">Jorden</span>()
      </div>
      <div class="code-line typing"><span class="variable">jorden</span>.<span class="function">update</span>()
      </div>
     </div>
     <div class="button-group"><button class="btn btn-run" id="run-code" onclick="runCode()">🚀 Kör koden!</button>
     </div>
     <div class="feedback-message" id="feedback-5">
      🎉 Koden körs! Se hur planeten reagerar på sina egenskaper!
     </div>
     <div class="button-group"><button class="btn btn-secondary" onclick="prevStep()">← Föregående</button> <button class="btn" id="next-5" onclick="nextStep()" disabled>Nästa steg →</button>
     </div>
    </div><!-- Steg 6: Ändra värden -->
    <div class="step-container" id="step-6">
     <div class="step-header">
      <div class="step-title">
       🎛️ Steg 6: Ändra objektets värden
      </div>
      <div class="step-description">
       Nu kan du ändra planetens egenskaper och se direkt hur den reagerar!
      </div>
     </div>
     <div class="planet-container">
      <div class="planet rotating" id="planet-6">
       <div class="planet-stats" id="planet-stats-6">
        🌍 Interaktiv planet!
       </div>
      </div>
     </div>
     <div class="code-editor">
      <div class="code-line completed"><span class="variable">jorden</span>.<span class="variable">co2</span> = <span class="number" id="final-co2">380</span>
      </div>
      <div class="code-line completed"><span class="variable">jorden</span>.<span class="variable">temperatur</span> = <span class="number" id="final-temp">15</span>
      </div>
      <div class="code-line completed"><span class="variable">jorden</span>.<span class="function">update</span>()
      </div>
     </div>
     <div class="property-controls">
      <div class="property-control">
       <div class="property-label">
        🌡️ Temperatur (°C)
       </div><input type="range" class="property-slider" id="final-temp-slider" min="-50" max="50" value="15">
       <div class="property-value" id="final-temp-value">
        15°C
       </div>
      </div>
      <div class="property-control">
       <div class="property-label">
        💨 CO₂ (ppm)
       </div><input type="range" class="property-slider" id="final-co2-slider" min="280" max="500" value="380">
       <div class="property-value" id="final-co2-value">
        380 ppm
       </div>
      </div>
     </div>
     <div class="button-group"><button class="btn btn-run" onclick="updatePlanet()">🔄 Uppdatera planeten!</button>
     </div>
     <div class="feedback-message" id="feedback-6">
      🎉 Perfekt! Du kan nu ändra objektets värden och se direkt hur världen reagerar!
     </div>
     <div class="button-group"><button class="btn btn-secondary" onclick="prevStep()">← Föregående</button> <button class="btn" onclick="showFinalAnimation()">🎊 Slutför äventyret!</button>
     </div>
    </div><!-- Slutanimation -->
    <div class="step-container" id="final-step">
     <div class="final-animation">
      <div class="sparkles" id="sparkles"></div>
      <h2 id="completion-message">🎉 Grattis! Du har byggt din egen klass — precis som en riktig programmerare!</h2>
      <div class="planet-container">
       <div class="planet rotating glowing" style="width: 200px; height: 200px;">
        <div class="planet-stats" style="opacity: 1;">
         🌍 Din färdiga planet!
        </div>
       </div>
      </div>
      <div class="code-showcase" id="final-code"><!-- Final code will be shown here -->
      </div>
      <div class="button-group"><button class="btn" onclick="restartGame()">🔄 Spela igen</button> <button class="btn btn-secondary" onclick="showFullCode()">📋 Visa all kod</button>
      </div>
     </div>
    </div>
   </div>
  </div>
  <script>
        let currentStep = 1;
        const totalSteps = 6;
        let gameData = {
            temperature: 15,
            co2: 380,
            age: 4500000000,
            solarEnergy: 100,
            completedSteps: []
        };

        const defaultConfig = {
            game_title: "🌍 Bygg Jorden - Python Klassresa",
            welcome_message: "Välkommen till kodningsäventyret! Lär dig bygga din egen klass steg för steg.",
            completion_message: "🎉 Grattis! Du har byggt din egen klass — precis som en riktig programmerare!"
        };

        // Element SDK implementation
        const capabilities = {
            recolorables: [
                {
                    get: () => window.elementSdk?.config?.primary_color || "#ff6b35",
                    set: (value) => {
                        if (window.elementSdk) {
                            window.elementSdk.setConfig({ primary_color: value });
                        }
                    }
                },
                {
                    get: () => window.elementSdk?.config?.background_color || "#0f0f23",
                    set: (value) => {
                        if (window.elementSdk) {
                            window.elementSdk.setConfig({ background_color: value });
                        }
                    }
                }
            ],
            borderables: [],
            fontEditable: {
                get: () => window.elementSdk?.config?.font_family || "Comic Sans MS",
                set: (value) => {
                    if (window.elementSdk) {
                        window.elementSdk.setConfig({ font_family: value });
                    }
                }
            },
            fontSizeable: {
                get: () => window.elementSdk?.config?.font_size || 16,
                set: (value) => {
                    if (window.elementSdk) {
                        window.elementSdk.setConfig({ font_size: value });
                    }
                }
            }
        };

        async function onConfigChange(config) {
            const primaryColor = config.primary_color || defaultConfig.primary_color || "#ff6b35";
            const backgroundColor = config.background_color || defaultConfig.background_color || "#0f0f23";
            const fontFamily = config.font_family || defaultConfig.font_family || "Comic Sans MS";
            const fontSize = config.font_size || defaultConfig.font_size || 16;

            // Update colors
            document.body.style.background = `linear-gradient(135deg, ${backgroundColor} 0%, #1a1a3a 50%, #2d1b69 100%)`;
            
            const buttons = document.querySelectorAll('.btn:not(.btn-secondary):not(.btn-run)');
            buttons.forEach(btn => {
                btn.style.background = `linear-gradient(45deg, ${primaryColor}, ${primaryColor}dd)`;
            });

            const header = document.querySelector('.header');
            if (header) {
                header.style.background = `linear-gradient(45deg, ${primaryColor}, ${primaryColor}dd)`;
            }

            const timelineProgress = document.querySelector('.timeline-progress');
            if (timelineProgress) {
                timelineProgress.style.background = `linear-gradient(90deg, ${primaryColor}, ${primaryColor}dd)`;
            }

            // Update font
            document.body.style.fontFamily = `${fontFamily}, cursive, sans-serif`;

            // Update font sizes
            document.body.style.fontSize = `${fontSize}px`;

            // Update text content
            const gameTitle = document.getElementById('game-title');
            if (gameTitle) {
                gameTitle.textContent = config.game_title || defaultConfig.game_title;
            }

            const welcomeMessage = document.getElementById('welcome-message');
            if (welcomeMessage) {
                welcomeMessage.textContent = config.welcome_message || defaultConfig.welcome_message;
            }

            const completionMessage = document.getElementById('completion-message');
            if (completionMessage) {
                completionMessage.textContent = config.completion_message || defaultConfig.completion_message;
            }
        }

        function mapToEditPanelValues(config) {
            return new Map([
                ["game_title", config.game_title || defaultConfig.game_title],
                ["welcome_message", config.welcome_message || defaultConfig.welcome_message],
                ["completion_message", config.completion_message || defaultConfig.completion_message]
            ]);
        }

        // Initialize Element SDK
        if (window.elementSdk) {
            window.elementSdk.init({
                defaultConfig: defaultConfig,
                onConfigChange: onConfigChange,
                mapToCapabilities: () => capabilities,
                mapToEditPanelValues: mapToEditPanelValues
            });
        }

        function updateTimeline() {
            const progress = ((currentStep - 1) / (totalSteps - 1)) * 100;
            document.getElementById('timeline-progress').style.width = progress + '%';

            // Update timeline steps
            document.querySelectorAll('.timeline-step').forEach((step, index) => {
                const stepNumber = index + 1;
                step.classList.remove('current', 'completed');
                
                if (stepNumber < currentStep) {
                    step.classList.add('completed');
                    step.textContent = '✓';
                } else if (stepNumber === currentStep) {
                    step.classList.add('current');
                    step.textContent = stepNumber;
                } else {
                    step.textContent = stepNumber;
                }
            });
        }

        function updatePlanetAppearance(planetId = 'planet') {
            const planet = document.getElementById(planetId);
            if (!planet) return;

            planet.classList.remove('hot', 'cold');
            
            if (gameData.temperature > 25) {
                planet.classList.add('hot');
            } else if (gameData.temperature < 5) {
                planet.classList.add('cold');
            }

            // Update planet stats
            const stats = document.getElementById(planetId + '-stats') || planet.querySelector('.planet-stats');
            if (stats) {
                stats.textContent = `🌡️ ${gameData.temperature}°C | 💨 ${gameData.co2} ppm CO₂`;
            }
        }

        function showFeedback(stepNumber) {
            const feedback = document.getElementById(`feedback-${stepNumber}`);
            if (feedback) {
                feedback.classList.add('show');
                setTimeout(() => {
                    feedback.classList.remove('show');
                }, 3000);
            }
        }

        function nextStep() {
            if (currentStep >= totalSteps) return;

            // Mark current step as completed
            gameData.completedSteps.push(currentStep);

            // Hide current step
            document.getElementById(`step-${currentStep}`).classList.remove('active');
            
            // Move to next step
            currentStep++;
            
            // Show next step
            document.getElementById(`step-${currentStep}`).classList.add('active');
            
            updateTimeline();
            initializeCurrentStep();
        }

        function prevStep() {
            if (currentStep <= 1) return;

            // Hide current step
            document.getElementById(`step-${currentStep}`).classList.remove('active');
            
            // Move to previous step
            currentStep--;
            
            // Show previous step
            document.getElementById(`step-${currentStep}`).classList.add('active');
            
            updateTimeline();
        }

        function initializeCurrentStep() {
            switch (currentStep) {
                case 1:
                    initStep1();
                    break;
                case 2:
                    initStep2();
                    break;
                case 3:
                    initStep3();
                    break;
                case 4:
                    initStep4();
                    break;
                case 5:
                    initStep5();
                    break;
                case 6:
                    initStep6();
                    break;
            }
        }

        // Step 1: Create class
        function initStep1() {
            const input = document.getElementById('class-input');
            const nextBtn = document.getElementById('next-1');
            
            input.addEventListener('input', function() {
                const value = this.value.toLowerCase().trim();
                if (value === 'class jorden:' || value === 'class jorden') {
                    nextBtn.disabled = false;
                    document.getElementById('planet').classList.add('glowing');
                    showFeedback(1);
                } else {
                    nextBtn.disabled = true;
                    document.getElementById('planet').classList.remove('glowing');
                }
            });
        }

        // Step 2: Create object
        function initStep2() {
            const dropZone = document.getElementById('object-input');
            const nextBtn = document.getElementById('next-2');
            let droppedBlocks = [];

            document.querySelectorAll('.code-block').forEach(block => {
                block.addEventListener('dragstart', function(e) {
                    e.dataTransfer.setData('text/plain', this.dataset.code);
                });

                block.addEventListener('click', function() {
                    if (!this.classList.contains('used')) {
                        addBlockToDropZone(this.dataset.code, this);
                    }
                });
            });

            dropZone.addEventListener('dragover', function(e) {
                e.preventDefault();
            });

            dropZone.addEventListener('drop', function(e) {
                e.preventDefault();
                const code = e.dataTransfer.getData('text/plain');
                const block = document.querySelector(`[data-code="${code}"]`);
                addBlockToDropZone(code, block);
            });

            function addBlockToDropZone(code, blockElement) {
                if (blockElement.classList.contains('used')) return;

                const newBlock = document.createElement('span');
                newBlock.textContent = code;
                newBlock.className = 'code-block used';
                newBlock.style.margin = '0 5px';
                dropZone.appendChild(newBlock);

                blockElement.classList.add('used');
                droppedBlocks.push(code);

                checkStep2Completion();
            }

            function checkStep2Completion() {
                const correctOrder = ['jorden', '=', 'Jorden()'];
                if (droppedBlocks.length === 3 && 
                    droppedBlocks.join(' ') === correctOrder.join(' ')) {
                    nextBtn.disabled = false;
                    showFeedback(2);
                }
            }
        }

        // Step 3: Properties
        function initStep3() {
            const tempSlider = document.getElementById('temp-slider');
            const co2Slider = document.getElementById('co2-slider');
            const solarSlider = document.getElementById('solar-slider');

            function updateProperty(property, value, displayId, valueId, unit = '') {
                gameData[property] = parseInt(value);
                document.getElementById(displayId).textContent = value;
                document.getElementById(valueId).textContent = value + unit;
                updatePlanetAppearance('planet-3');
            }

            tempSlider.addEventListener('input', function() {
                updateProperty('temperature', this.value, 'temp-display', 'temp-value', '°C');
            });

            co2Slider.addEventListener('input', function() {
                updateProperty('co2', this.value, 'co2-display', 'co2-value', ' ppm');
            });

            solarSlider.addEventListener('input', function() {
                updateProperty('solarEnergy', this.value, 'solar-display', 'solar-value', '%');
            });

            // Show feedback after a short delay
            setTimeout(() => showFeedback(3), 1000);
        }

        // Step 4: Functions
        function initStep4() {
            const dropZone = document.getElementById('function-input');
            const nextBtn = document.getElementById('next-4');
            let functionBuilt = false;

            document.querySelectorAll('#step-4 .code-block').forEach(block => {
                block.addEventListener('click', function() {
                    if (!functionBuilt) {
                        // Simple logic - just check if they clicked some blocks
                        functionBuilt = true;
                        nextBtn.disabled = false;
                        showFeedback(4);
                    }
                });
            });
        }

        // Step 5: Use object
        function initStep5() {
            // Auto-enable next button after running code
        }

        function runCode() {
            const planet = document.getElementById('planet-5');
            planet.classList.add('rotating');
            
            // Simulate the update function
            if (gameData.co2 > 400) {
                gameData.temperature += 2;
            } else {
                gameData.temperature -= 1;
            }
            
            updatePlanetAppearance('planet-5');
            showFeedback(5);
            
            setTimeout(() => {
                document.getElementById('next-5').disabled = false;
            }, 2000);
        }

        // Step 6: Change values
        function initStep6() {
            const tempSlider = document.getElementById('final-temp-slider');
            const co2Slider = document.getElementById('final-co2-slider');

            tempSlider.addEventListener('input', function() {
                gameData.temperature = parseInt(this.value);
                document.getElementById('final-temp').textContent = this.value;
                document.getElementById('final-temp-value').textContent = this.value + '°C';
            });

            co2Slider.addEventListener('input', function() {
                gameData.co2 = parseInt(this.value);
                document.getElementById('final-co2').textContent = this.value;
                document.getElementById('final-co2-value').textContent = this.value + ' ppm';
            });

            showFeedback(6);
        }

        function updatePlanet() {
            updatePlanetAppearance('planet-6');
            
            // Add some visual effects
            const planet = document.getElementById('planet-6');
            planet.style.transform = 'scale(1.1)';
            setTimeout(() => {
                planet.style.transform = 'scale(1)';
            }, 300);
        }

        function showFinalAnimation() {
            // Hide current step
            document.getElementById(`step-${currentStep}`).classList.remove('active');
            
            // Show final animation
            document.getElementById('final-step').classList.add('active');
            
            // Update timeline to show all completed
            currentStep = totalSteps + 1;
            updateTimeline();
            
            // Generate sparkles
            createSparkles();
            
            // Show final code
            generateFinalCode();
        }

        function createSparkles() {
            const sparklesContainer = document.getElementById('sparkles');
            for (let i = 0; i < 20; i++) {
                const sparkle = document.createElement('div');
                sparkle.className = 'sparkle';
                sparkle.style.left = Math.random() * 100 + '%';
                sparkle.style.top = Math.random() * 100 + '%';
                sparkle.style.animationDelay = Math.random() * 2 + 's';
                sparklesContainer.appendChild(sparkle);
            }
        }

        function generateFinalCode() {
            const finalCode = `class Jorden:
    def __init__(self):
        self.temperatur = ${gameData.temperature}
        self.co2 = ${gameData.co2}
        self.alder = ${gameData.age}
        self.form = "rund"
        self.solenergi = ${gameData.solarEnergy}
    
    def update(self):
        if self.co2 > 400:
            self.temperatur += 2
        else:
            self.temperatur -= 1

# Skapa ett objekt
jorden = Jorden()

# Använd objektet
jorden.update()

# Ändra värden
jorden.co2 = ${gameData.co2}
jorden.temperatur = ${gameData.temperature}

print(f"Temperatur: {jorden.temperatur}°C")
print(f"CO₂: {jorden.co2} ppm")`;

            document.getElementById('final-code').textContent = finalCode;
        }

        function restartGame() {
            currentStep = 1;
            gameData = {
                temperature: 15,
                co2: 380,
                age: 4500000000,
                solarEnergy: 100,
                completedSteps: []
            };
            
            // Hide all steps
            document.querySelectorAll('.step-container').forEach(step => {
                step.classList.remove('active');
            });
            
            // Show first step
            document.getElementById('step-1').classList.add('active');
            
            // Reset form values
            document.getElementById('class-input').value = '';
            document.getElementById('next-1').disabled = true;
            
            updateTimeline();
            initializeCurrentStep();
        }

        function showFullCode() {
            const codeElement = document.getElementById('final-code');
            if (codeElement.style.maxHeight === 'none') {
                codeElement.style.maxHeight = '400px';
            } else {
                codeElement.style.maxHeight = 'none';
            }
        }

        // Initialize the game
        document.addEventListener('DOMContentLoaded', function() {
            updateTimeline();
            initializeCurrentStep();
            updatePlanetAppearance();
        });
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'99530d4cf18797c6',t:'MTc2MTU3NzExMC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>